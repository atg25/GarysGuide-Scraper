services:
  scheduler:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: garys-events-scheduler
    environment:
      CRON_SCHEDULE: ${CRON_SCHEDULE:-0 */6 * * *}
      TZ: ${TZ:-UTC}
      SCRAPER_STRATEGY: ${SCRAPER_STRATEGY:-web}
      SCRAPER_SEARCH_TERM: ${SCRAPER_SEARCH_TERM:-}
      SCRAPER_LIMIT: ${SCRAPER_LIMIT:-0}
      DB_PATH: ${DB_PATH:-/data/garys_events.db}
      RETRY_ATTEMPTS: ${RETRY_ATTEMPTS:-3}
      RETRY_BACKOFF_SECONDS: ${RETRY_BACKOFF_SECONDS:-5}
      API_TOKEN: ${API_TOKEN:-}
    volumes:
      - garys_events_data:/data
    restart: unless-stopped

volumes:
  garys_events_data:
    name: garys_events_data
